
app_name: 'server1'
project_name: 'carrier'
project_version: '0.1'

logging:
  level: DEBUG
  format: '%(levelname)s %(asctime)s  %(message)s'
  message_format: '%(project_name)s:%(project_version)s %(app_id)s %(_filename)s:%(_lineno)d [%(tags)s] '

  filters:
    trans:
      tag: 'TRANS:'   # tag 过滤
  handlers:
    - type: file
      enable: true
      filename: 'server.log'
      encoding: 'UTF-8'
      max_bytes: 67108864 # 64MB
      backup_count: 10

    - type: file
      enable: true
      filename: 'trans.log'   #运单日志跟踪
      encoding: 'UTF-8'
      max_bytes: 67108864 # 64MB
      backup_count: 10
      filter: 'trans'

    - type: logtail
      enable: false
      logstore: 'abc'
      access_token: 'xxxx'
      scret_key: 'xxxx'
      uri: 'xxxx'

    - type: console
      enable: false

auto_trace: #自动日志记录
  level: DEBUG
  http_request:
    options:
      header:  false
      body:  true
      max_size: 500 # 最大数据包长度
    urls:
      - match: '/'
      - match: 'zoo/cat'
        body:  true

  http_response:
    options:
      header:  false
      body:  true
      max_size: 500 # 最大数据包长度
    urls:
      - match: '/'
      - match: 'zoo/cat'
        body:  true

celery_config:
  services:
    - name: 'test_server'
      route:
        type: 'redis'
        broker: 'redis://127.0.0.1:6379/6'       #request queue
        backend: 'redis://127.0.0.1:6379/7'
      exchange:
        name: 'tasks'
        type: 'direct' # topic,fanout,headers,direct
      queues:
        - name: 'sub_dash'
          routing_key: 'sub_dash'
      tasks:
        - name: 'hello'
          path: 'access.celery.hello'
          queue: 'sub_dash'
          routing_key: 'sub_dash'
      default_queue:  'default'

  current: 'test_server' # 当前可用的celery服务




database_config:
  SQLALCHEMY_DATABASE_URI : 'sqlite:////tmp/test.db'
  SQLALCHEMY_TRACK_MODIFICATIONS : true
  SQLALCHEMY_COMMIT_ON_TEARDOWN : true

http:
  host : '127.0.0.1'
  port : 5555
  threaded: false
  debug: true

cache_config:
  default:
    type: redis
    host: '127.0.0.1'
    port: 5603
    password: '1111'
    enable: true

#mysql://username:password@hostname/database
#sqlite:////absolute/path/to/database
#postgresql://username:password@hostname/database

flask_config:
  active: default
  default:
    REDIS_URL : "redis://:@localhost:6379/1"
#    SQLALCHEMY_DATABASE_URI : 'mysql://root:root123@127.0.0.1:3306/carrier?charset=utf8'
    SQLALCHEMY_DATABASE_URI : 'sqlite:////tmp/test.db'
#    SQLALCHEMY_DATABASE_URI : 'sqlite:////tmp/test.db'
    SQLALCHEMY_TRACK_MODIFICATIONS : true
    SQLALCHEMY_COMMIT_ON_TEARDOWN : true
    SECRET_KEY : "abc"
    TOKEN_EXPIRE : 3600*2
    MAX_CONTENT_LENGTH : 5242880
    UPLOAD_FOLDER : 'upload/'
    FRONT_URL :  'tender_manage/'
#       ALLOWED_EXTENSIONS : set(['png', 'jpg', 'jpeg', 'gif', 'bmp', 'pdf'])
#    M_HOST : 'smtp.163.com:465'
#    M_SENDER : 'mynamegyz@163.com'
#    M_PWD : 'gyz111111a'
#    ADMINS :
#      - 'mynamegyz@163.com'
    DEBUG_TB_PROFILER_ENABLED : true
    DEBUG : true
  devel:

blueprint_routes:
  - 'access.api.v1'






